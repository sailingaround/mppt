EESchema Schematic File Version 2
LIBS:linearPower
LIBS:power
LIBS:device
LIBS:lib
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:stm32
LIBS:mppt-cache
EELAYER 25 0
EELAYER END
$Descr A3 16535 11693
encoding utf-8
Sheet 1 4
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
Text Label 4575 6675 2    60   ~ 0
nrst
Text Label 4575 8375 2    60   ~ 0
jnrst
$Comp
L GND #PWR01
U 1 1 583859E4
P 7375 10100
F 0 "#PWR01" H 7375 9850 50  0001 C CNN
F 1 "GND" H 7375 9950 50  0000 C CNN
F 2 "" H 7375 10100 50  0000 C CNN
F 3 "" H 7375 10100 50  0000 C CNN
	1    7375 10100
	1    0    0    -1  
$EndComp
$Comp
L +3V3 #PWR02
U 1 1 58385A56
P 7375 6000
F 0 "#PWR02" H 7375 5850 50  0001 C CNN
F 1 "+3V3" H 7375 6140 50  0000 C CNN
F 2 "" H 7375 6000 50  0000 C CNN
F 3 "" H 7375 6000 50  0000 C CNN
	1    7375 6000
	1    0    0    -1  
$EndComp
Text Label 10375 9175 0    60   ~ 0
nmeaRTS
Text Label 10375 8975 0    60   ~ 0
nmeaRX
Text Label 10375 8875 0    60   ~ 0
nmeaTX
$Sheet
S 5425 3000 3450 2325
U 584FF1F5
F0 "regulator" 60
F1 "regulator.sch" 60
F2 "GENERATOR_IN-" I L 5425 3900 59 
F3 "GENERATOR_IN+" I L 5425 3600 59 
F4 "BATTERY+" B R 8875 3600 59 
F5 "BATTERY-" B R 8875 3900 59 
F6 "pulse_in" I L 5425 4250 59 
F7 "Iout" I R 8875 4650 59 
F8 "Ubat" I R 8875 4825 59 
F9 "Uin" I R 8875 5025 59 
F10 "Iin" I R 8875 5200 59 
$EndSheet
Text Label 11100 7975 0    60   ~ 0
REGUL_PULSE
Text Label 4950 4250 2    60   ~ 0
REGUL_PULSE
$Comp
L GNDA #PWR03
U 1 1 5853E661
P 7575 10100
F 0 "#PWR03" H 7575 9850 50  0001 C CNN
F 1 "GNDA" H 7575 9950 50  0000 C CNN
F 2 "" H 7575 10100 50  0000 C CNN
F 3 "" H 7575 10100 50  0000 C CNN
	1    7575 10100
	-1   0    0    -1  
$EndComp
$Comp
L VDDA #PWR04
U 1 1 5853ED17
P 7575 6000
F 0 "#PWR04" H 7575 5850 50  0001 C CNN
F 1 "VDDA" H 7575 6150 50  0000 C CNN
F 2 "" H 7575 6000 50  0000 C CNN
F 3 "" H 7575 6000 50  0000 C CNN
	1    7575 6000
	1    0    0    -1  
$EndComp
$Sheet
S 875  1600 1550 900 
U 58543DA8
F0 "power" 60
F1 "power.sch" 60
$EndSheet
Text Notes 14150 8700 0    60   ~ 0
rs485 differential serial (write-only) \nfor feedback to the ship computer
Text Notes 5500 4400 0    60   ~ 0
this will be pwm at about 100kHz\n
$Comp
L GND #PWR05
U 1 1 58579F89
P 13875 9725
F 0 "#PWR05" H 13875 9475 50  0001 C CNN
F 1 "GND" H 13875 9575 50  0000 C CNN
F 2 "" H 13875 9725 50  0000 C CNN
F 3 "" H 13875 9725 50  0000 C CNN
	1    13875 9725
	1    0    0    -1  
$EndComp
$Comp
L C C101
U 1 1 5857C66D
P 2250 7150
F 0 "C101" H 2275 7250 50  0000 L CNN
F 1 "100n" H 2275 7050 50  0000 L CNN
F 2 "Capacitors_SMD:C_0805" H 2288 7000 50  0001 C CNN
F 3 "" H 2250 7150 50  0000 C CNN
	1    2250 7150
	1    0    0    -1  
$EndComp
$Comp
L C C102
U 1 1 5857CA68
P 2525 7150
F 0 "C102" H 2550 7250 50  0000 L CNN
F 1 "100n" H 2550 7050 50  0000 L CNN
F 2 "Capacitors_SMD:C_0805" H 2563 7000 50  0001 C CNN
F 3 "" H 2525 7150 50  0000 C CNN
	1    2525 7150
	1    0    0    -1  
$EndComp
$Comp
L C C103
U 1 1 5857CAEC
P 2800 7150
F 0 "C103" H 2825 7250 50  0000 L CNN
F 1 "100n" H 2825 7050 50  0000 L CNN
F 2 "Capacitors_SMD:C_0805" H 2838 7000 50  0001 C CNN
F 3 "" H 2800 7150 50  0000 C CNN
	1    2800 7150
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR06
U 1 1 5857CB62
P 2525 7300
F 0 "#PWR06" H 2525 7050 50  0001 C CNN
F 1 "GND" H 2525 7150 50  0000 C CNN
F 2 "" H 2525 7300 50  0000 C CNN
F 3 "" H 2525 7300 50  0000 C CNN
	1    2525 7300
	1    0    0    -1  
$EndComp
$Comp
L +3V3 #PWR07
U 1 1 5857CBBE
P 2525 7000
F 0 "#PWR07" H 2525 6850 50  0001 C CNN
F 1 "+3V3" H 2525 7140 50  0000 C CNN
F 2 "" H 2525 7000 50  0000 C CNN
F 3 "" H 2525 7000 50  0000 C CNN
	1    2525 7000
	1    0    0    -1  
$EndComp
Text Label 10650 5200 2    60   ~ 0
Iin
Text Label 4275 8075 0    60   ~ 0
Iin
$Comp
L ST3485ECDR U101
U 1 1 585FCDC0
P 13875 9225
F 0 "U101" H 13875 10175 118 0000 C CNN
F 1 "ST3485ECDR" H 13975 8525 118 0000 C CNN
F 2 "Housings_SOIC:SOIC-8_3.9x4.9mm_Pitch1.27mm" H 13525 9225 118 0001 C CNN
F 3 "" H 13525 9225 118 0001 C CNN
F 4 "1842628" H 13975 10275 118 0001 C CNN "farnell"
	1    13875 9225
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR08
U 1 1 589692E6
P 13875 8675
F 0 "#PWR08" H 13875 8525 50  0001 C CNN
F 1 "+5V" H 13875 8815 50  0000 C CNN
F 2 "" H 13875 8675 50  0000 C CNN
F 3 "" H 13875 8675 50  0000 C CNN
	1    13875 8675
	1    0    0    -1  
$EndComp
$Comp
L D_Zener D101
U 1 1 58969F08
P 11800 9500
F 0 "D101" H 11800 9600 50  0000 C CNN
F 1 "3v" H 11800 9400 50  0000 C CNN
F 2 "Diodes_SMD:D_SOD-323_HandSoldering" H 11800 9500 50  0001 C CNN
F 3 "" H 11800 9500 50  0000 C CNN
F 4 "2441312" H 11800 9500 60  0001 C CNN "farnell"
	1    11800 9500
	0    1    1    0   
$EndComp
$Comp
L GND #PWR09
U 1 1 58969F0F
P 11800 9650
F 0 "#PWR09" H 11800 9400 50  0001 C CNN
F 1 "GND" H 11800 9500 50  0000 C CNN
F 2 "" H 11800 9650 50  0000 C CNN
F 3 "" H 11800 9650 50  0000 C CNN
	1    11800 9650
	1    0    0    -1  
$EndComp
$Comp
L STM32F103CBTx U102
U 1 1 589B6E37
P 7475 8075
F 0 "U102" H 4675 9800 50  0000 L BNN
F 1 "STM32F103CBTx" H 10275 9800 50  0000 R BNN
F 2 "Housings_QFP:LQFP-48_7x7mm_Pitch0.5mm" H 10275 9750 50  0000 R TNN
F 3 "" H 7475 8075 50  0000 C CNN
	1    7475 8075
	1    0    0    -1  
$EndComp
$Comp
L Screw_Terminal_1x02 p101
U 1 1 58A67694
P 4225 3750
F 0 "p101" H 4225 4000 50  0000 C TNN
F 1 "Screw_Terminal_1x02" V 4075 3750 50  0000 C TNN
F 2 "lib:terminal" H 4225 3525 50  0001 C CNN
F 3 "" H 4200 3750 50  0001 C CNN
	1    4225 3750
	1    0    0    -1  
$EndComp
$Comp
L Screw_Terminal_1x02 p102
U 1 1 58A679AD
P 10325 3750
F 0 "p102" H 10325 4000 50  0000 C TNN
F 1 "Screw_Terminal_1x02" V 10175 3750 50  0000 C TNN
F 2 "lib:terminal" H 10325 3525 50  0001 C CNN
F 3 "" H 10300 3750 50  0001 C CNN
	1    10325 3750
	-1   0    0    1   
$EndComp
$Comp
L Screw_Terminal_1x02 p104
U 1 1 58A68B15
P 15625 9225
F 0 "p104" H 15625 9475 50  0000 C TNN
F 1 "Screw_Terminal_1x02" V 15475 9225 50  0000 C TNN
F 2 "lib:terminal" H 15625 9000 50  0001 C CNN
F 3 "" H 15600 9225 50  0001 C CNN
	1    15625 9225
	-1   0    0    -1  
$EndComp
$Comp
L R R101
U 1 1 58A694A4
P 12225 8975
F 0 "R101" V 12305 8975 50  0000 C CNN
F 1 "1k" V 12225 8975 50  0000 C CNN
F 2 "Resistors_SMD:R_0805" V 12155 8975 50  0001 C CNN
F 3 "" H 12225 8975 50  0001 C CNN
	1    12225 8975
	0    1    1    0   
$EndComp
Wire Wire Line
	7275 9875 7375 10100
Wire Wire Line
	7375 10100 7375 9875
Wire Wire Line
	7375 10100 7475 9875
Wire Wire Line
	7375 6000 7275 6275
Wire Wire Line
	7375 6000 7375 6275
Wire Wire Line
	7375 6000 7475 6275
Wire Wire Line
	10650 5200 8875 5200
Wire Wire Line
	8875 5025 11000 5025
Wire Wire Line
	11000 5025 11000 8075
Wire Wire Line
	11000 8075 10375 8075
Wire Wire Line
	10375 8175 11025 8175
Wire Wire Line
	11025 8175 11025 4825
Wire Wire Line
	11025 4825 8875 4825
Wire Wire Line
	8875 4650 11050 4650
Wire Wire Line
	11050 4650 11050 8275
Wire Wire Line
	11050 8275 10375 8275
Wire Wire Line
	4425 3650 4575 3600
Wire Wire Line
	4575 3600 5425 3600
Wire Wire Line
	4425 3850 4575 3900
Wire Wire Line
	4575 3900 5425 3900
Wire Wire Line
	9900 3600 10125 3650
Wire Wire Line
	8875 3600 9900 3600
Wire Wire Line
	8875 3900 9900 3900
Wire Wire Line
	11100 7975 10375 7975
Wire Wire Line
	4950 4250 5425 4250
Wire Wire Line
	10375 8875 12625 8875
Wire Wire Line
	10375 8975 12075 8975
Wire Wire Line
	10375 9175 13275 9175
Wire Wire Line
	13275 9075 13275 9325
Connection ~ 13275 9175
Wire Wire Line
	15425 9125 15375 9025
Wire Wire Line
	15375 9025 14425 9025
Wire Wire Line
	14425 9425 15375 9425
Wire Wire Line
	15375 9425 15425 9325
Wire Wire Line
	7575 6000 7575 6275
Wire Wire Line
	7575 9875 7575 10100
Wire Wire Line
	13275 9425 13175 9425
Wire Wire Line
	13175 9425 12625 8875
Wire Wire Line
	2250 7000 2800 7000
Wire Wire Line
	2250 7300 2800 7300
Connection ~ 2525 7300
Connection ~ 2525 7000
Wire Wire Line
	4275 8075 4575 8075
Wire Wire Line
	11800 8975 11800 9350
Connection ~ 11800 8975
Wire Wire Line
	9900 3900 10125 3850
Wire Wire Line
	12375 8975 13275 8975
$Comp
L Screw_Terminal_1x01 h0
U 1 1 58A6CF09
P 9725 3400
F 0 "h0" H 9725 3550 50  0000 C TNN
F 1 "bat+" V 9575 3400 50  0000 C TNN
F 2 "lib:m4_hole" H 9725 3275 50  0001 C CNN
F 3 "" H 9725 3300 50  0001 C CNN
	1    9725 3400
	0    1    1    0   
$EndComp
$Comp
L Screw_Terminal_1x01 h1
U 1 1 58A6CF8E
P 9725 4100
F 0 "h1" H 9725 4250 50  0000 C TNN
F 1 "bat-" V 9575 4100 50  0000 C TNN
F 2 "lib:m4_hole" H 9725 3975 50  0001 C CNN
F 3 "" H 9725 4000 50  0001 C CNN
	1    9725 4100
	0    -1   -1   0   
$EndComp
Connection ~ 9725 3900
Connection ~ 9725 3600
$Comp
L CONN_01X05 J101
U 1 1 58B6072E
P 15300 1200
F 0 "J101" H 15300 1500 50  0000 C CNN
F 1 "CONN_01X05" V 15400 1200 50  0000 C CNN
F 2 "mylibs:swd_conn" H 15300 1200 50  0001 C CNN
F 3 "" H 15300 1200 50  0001 C CNN
	1    15300 1200
	1    0    0    1   
$EndComp
$Comp
L GND #PWR010
U 1 1 58B60A70
P 15100 1400
F 0 "#PWR010" H 15100 1150 50  0001 C CNN
F 1 "GND" H 15100 1250 50  0000 C CNN
F 2 "" H 15100 1400 50  0001 C CNN
F 3 "" H 15100 1400 50  0001 C CNN
	1    15100 1400
	1    0    0    -1  
$EndComp
Text Label 15100 1300 2    60   ~ 0
nrst
$Comp
L +3V3 #PWR011
U 1 1 58B628B7
P 15100 1000
F 0 "#PWR011" H 15100 850 50  0001 C CNN
F 1 "+3V3" H 15100 1140 50  0000 C CNN
F 2 "" H 15100 1000 50  0000 C CNN
F 3 "" H 15100 1000 50  0000 C CNN
	1    15100 1000
	1    0    0    -1  
$EndComp
Text Label 15100 1100 2    60   ~ 0
swdio
Text Label 15100 1200 2    60   ~ 0
swclk
Text Label 10650 9275 0    60   ~ 0
swdio
Wire Wire Line
	10650 9275 10375 9275
Text Label 10650 9375 0    60   ~ 0
swclk
Wire Wire Line
	10650 9375 10375 9375
$Sheet
S 3450 8400 525  750 
U 58B76A38
F0 "leds" 60
F1 "leds.sch" 60
F2 "in1" I R 3975 8475 60 
F3 "in2" I R 3975 8575 60 
F4 "in3" I R 3975 8675 60 
F5 "in4" I R 3975 8775 60 
F6 "inB" I R 3975 8975 60 
F7 "inA" I R 3975 8875 60 
F8 "inC" I R 3975 9075 60 
$EndSheet
Wire Wire Line
	3975 8475 4575 8475
Wire Wire Line
	4575 8575 3975 8575
Wire Wire Line
	3975 8675 4575 8675
Wire Wire Line
	4575 8775 3975 8775
Wire Wire Line
	3975 8875 4575 8875
Wire Wire Line
	4050 8975 4150 8275
Wire Wire Line
	4150 8275 4575 8275
Wire Wire Line
	4050 8975 3975 8975
Wire Wire Line
	3975 9075 4050 9075
Wire Wire Line
	4050 9075 4200 10000
Wire Wire Line
	4200 10000 7450 10525
Wire Wire Line
	7450 10525 10700 10025
Wire Wire Line
	10700 10025 10700 9475
Wire Wire Line
	10700 9475 10375 9475
$EndSCHEMATC
